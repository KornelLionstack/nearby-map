window.nearby_map=window.nearby_map||{},window.nearby_map_object=window.nearby_map_object||{},window.origin=window.origin||{},document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll("[class*=\"proximity_place_\"]"),a="undefined"!=typeof ajaxurl?ajaxurl:"undefined"!=typeof cspm_nearby_map?cspm_nearby_map.ajax_url:"/wp-admin/admin-ajax.php";function n(e){const a=new Map([["á","a"],["é","e"],["í","i"],["ó","o"],["ö","o"],["ő","o"],["ú","u"],["ü","u"],["ű","u"],["Á","a"],["É","e"],["Í","i"],["Ó","o"],["Ö","o"],["Ő","o"],["Ú","u"],["Ü","u"],["Ű","u"]]);return e.toLowerCase().split("").map(e=>a.get(e)||e).join("").replace(/[\s\-]+/g,"_").replace(/[^a-z0-9_]/g,"").trim()}e.forEach(e=>{e.addEventListener("click",function(){const e=this.dataset.proximityName,t=this.dataset.mapId,o=n(e);fetch(a+"?action=get_custom_nearby_locations").then(e=>e.json()).then(e=>{const a=e.filter(e=>n(e.type)===o);0===a.length&&console.warn(`Nincs találat a '${o}' slug-hoz.`),function(e,a){const n=document.getElementById(a);if(!n)return console.error(`Nem található a térkép elem: ${a}`);const t=parseFloat(n.dataset.lat||47.475),o=parseFloat(n.dataset.lng||19.04),r=parseInt(n.dataset.zoom||13),i=new google.maps.Map(n,{center:{lat:t,lng:o},zoom:r,mapTypeId:"roadmap"});window.nearby_map[a]=i,window.nearby_map_object[a]=i,window.origin[a]=new google.maps.LatLng(t,o),e.forEach(e=>{new google.maps.Marker({position:{lat:e.lat,lng:e.lng},map:i,title:e.name})})}(a,t)}).catch(e=>console.error("Helyek betöltésekor hiba történt:",e))})})});
