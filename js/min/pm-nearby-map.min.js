window.nearby_map=window.nearby_map||{},window.nearby_map_object=window.nearby_map_object||{},window.origin=window.origin||{},document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll('[class*="proximity_place_"]');let n="undefined"!=typeof ajaxurl?ajaxurl:"undefined"!=typeof cspm_nearby_map?cspm_nearby_map.ajax_url:"/wp-admin/admin-ajax.php";function l(e){let a=new Map([["á","a"],["é","e"],["í","i"],["ó","o"],["ö","o"],["ő","o"],["ú","u"],["ü","u"],["ű","u"],["Á","a"],["É","e"],["Í","i"],["Ó","o"],["Ö","o"],["Ő","o"],["Ú","u"],["Ü","u"],["Ű","u"]]);return e.toLowerCase().split("").map(e=>a.get(e)||e).join("").replace(/[\s\-]+/g,"_").replace(/[^a-z0-9_]/g,"").trim()}e.forEach(e=>{e.addEventListener("click",function(){var e=this.dataset.proximityName;let a=this.dataset.mapId,t=l(e);fetch(n+"?action=get_custom_nearby_locations").then(e=>e.json()).then(o=>{o=o.filter(e=>l(e.type)===t);0===o.length&&console.warn(`Nincs találat a '${t}' slug-hoz.`);{var r=a,e="codespacing_progress_map_"+r,i=document.getElementById(e);if(i){let e=parseFloat(i.dataset.lat||47.475),a=parseFloat(i.dataset.lng||19.04),t=parseInt(i.dataset.zoom||13),n=new google.maps.Map(i,{center:{lat:e,lng:a},zoom:t,mapTypeId:"roadmap"});window.nearby_map[r]=n,window.nearby_map_object[r]=n,window.origin[r]=new google.maps.LatLng(e,a),o.forEach(e=>{new google.maps.Marker({position:{lat:e.lat,lng:e.lng},map:n,title:e.name})})}else console.error("Nem található a térkép elem: "+e)}}).catch(e=>console.error("Helyek betöltésekor hiba történt:",e))})})});
