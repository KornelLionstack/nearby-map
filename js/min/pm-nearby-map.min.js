window.nearby_map=window.nearby_map||{},window.nearby_map_object=window.nearby_map_object||{},window.origin=window.origin||{},document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll('[class*="proximity_place_"]'),a="undefined"!=typeof ajaxurl?ajaxurl:"undefined"!=typeof cspm_nearby_map?cspm_nearby_map.ajax_url:"/wp-admin/admin-ajax.php";function n(e){const a=new Map([["á","a"],["é","e"],["í","i"],["ó","o"],["ö","o"],["ő","o"],["ú","u"],["ü","u"],["ű","u"],["Á","a"],["É","e"],["Í","i"],["Ó","o"],["Ö","o"],["Ő","o"],["Ú","u"],["Ü","u"],["Ű","u"]]);return e.toLowerCase().split("").map(e=>a.get(e)||e).join("").replace(/[\s\-]+/g,"_").replace(/[^a-z0-9_]/g,"").trim()}e.forEach(e=>{e.addEventListener("click",function(){const e=this.dataset.proximityName,o=this.dataset.mapId,t=n(e);fetch(a+"?action=get_custom_nearby_locations").then(e=>e.json()).then(e=>{const a=e.filter(e=>n(e.type)===t);0===a.length&&console.warn(`Nincs találat a '${t}' slug-hoz.`),function(e,a){const o="codespacing_progress_map_"+a,t=document.getElementById(o);if(!t)return console.error(`Nem található a térkép elem: ${o}`);const r=parseFloat(t.dataset.lat||47.475),i=parseFloat(t.dataset.lng||19.04),l=parseInt(t.dataset.zoom||13),p=new google.maps.Map(t,{center:{lat:r,lng:i},zoom:l,mapTypeId:"roadmap"});window.nearby_map[a]=p,window.nearby_map_object[a]=p,window.origin[a]=new google.maps.LatLng(r,i);const s="undefined"!=typeof cspm_nearby_map&&cspm_nearby_map.place_markers_file_url?cspm_nearby_map.place_markers_file_url:"";e.forEach(e=>{const a=s?{url:s+n(e.type)+".svg",scaledSize:new google.maps.Size(40,40)}:null;new google.maps.Marker({position:{lat:e.lat,lng:e.lng},map:p,title:e.name,...a?{icon:a}:{}})})}(a,o)}).catch(e=>console.error("Helyek betöltésekor hiba történt:",e))})})});
