var current_map_id,current_distance_unit,origin={},nearby_map={},nearby_map_object={},nearbyDirectionsDisplay={},selected_proximity_id={},existing_places={};function cspm_nearby_locations(e,a,s,t,r,_=""){var a=a,i={location:origin[e],types:[a]},i="distance"===r&&""===_?jQuery.extend({},i,{rankBy:google.maps.places.RankBy.DISTANCE}):jQuery.extend({},i,{radius:t});""!==_&&(i=jQuery.extend({},i,{query:_})),cspm_clear_nearby_markers(e),nearby_map_object[e].setZoom(9),jQuery("div#travel_mode_container_"+e).hide(),jQuery("div#cspm_directions_btn_container_"+e).hide(),jQuery("div#cspm_place_name_container_"+e).hide(),jQuery("div.cspm_nearby_map_directions_"+e).hide(),current_distance_unit=s,selected_proximity_id[current_map_id=e]=a,existing_places[e]=new Array,places_service_callback_limit=0;e=new google.maps.places.PlacesService(nearby_map_object[e]);""!==_?e.textSearch(i,cspm_places_service_callback):e.nearbySearch(i,cspm_places_service_callback)}function cspm_places_service_callback(e,a,s){var t="";if(jQuery("div.cspm_nearby_location_list_items_container_"+current_map_id).html(),a===google.maps.places.PlacesServiceStatus.OK){if(0<e.length){var r=selected_proximity_id[current_map_id],_=(cspm_nearby_map.place_types[r],cspm_nearby_map.place_types[r]);jQuery("div#cspm_nearby_cats_container_"+current_map_id).hide(),jQuery("div#cspm_nearby_places_list_"+current_map_id+" img.cspm_nearby_cat_list_img").attr("src",cspm_nearby_map.img_file_url+"nearby_white/"+r+".png"),jQuery("div#cspm_nearby_places_list_"+current_map_id+" span.cspm_nearby_cat_list_name").html(_),jQuery("div#cspm_nearby_places_list_"+current_map_id).show();for(var i=cspm_file_exists(cspm_nearby_map.place_markers_file_url+r+".png"),n=0;n<e.length;n++){var c,p=e[n].place_id;-1==jQuery.inArray(p,existing_places[current_map_id])&&-1!=jQuery.inArray(r,e[n].types)&&(existing_places[current_map_id].push(p),cspm_add_place_marker(current_map_id,r,e[n],current_distance_unit,i),t+='<div class="cspm_nearby_location_list_item cspm-row cspm_animated fadeInRight" data-place-type="'+r+'" data-place-id="'+p+'">',c=void 0!==e[n].photos?e[n].photos[0].getUrl({maxWidth:0,maxHeight:120}):cspm_nearby_map.img_file_url+"default-img-sm.jpg",t+='<div class="cspm_show_place_details_'+current_map_id+' cspm_location_list_item_photo pull-left" data-place-id="'+p+'" data-place-name="'+_+'" data-map-id="'+current_map_id+'" style="background:url('+c+') center center"></div>',t+='<div class="cspm_location_list_item_details pull-left">',void 0!==e[n].name&&(t+='<div class="cspm_place_name_list"><a class="cspm_show_place_details_'+current_map_id+' cspm_nearby_map_main_color hover" data-place-id="'+p+'" data-place-name="'+_+'" data-map-id="'+current_map_id+'">'+e[n].name+"</a></div>"),void 0!==e[n].vicinity&&(t+='<div class="cspm_place_vicinity_list"><img src="'+cspm_nearby_map.img_file_url+'vicinity.png" />'+e[n].vicinity+"</div>"),void 0!==e[n].geometry.location&&(cspm_distance_matrix(current_map_id,p,origin[current_map_id],e[n].geometry.location,current_distance_unit,"div.cspm_place_distance_list_"+p+" .cspm_place_distance_text"),t+='<div class="cspm_place_distance_list_'+p+'"><img src="'+cspm_nearby_map.img_file_url+'distance.png" /><span class="cspm_place_distance_text"><span class="wrapper"><span class="cssload-loader"></span></span></span></div>'),t+="<div>",void 0!==e[n].rating&&(t+='<div class="cspm_place_rating_list pull-left"><span class="cspm_stars_rating"><span style="width:'+cspm_stars(e[n].rating)+'px;"></span></span></div>'),t+='<div class="cspm_nearby_route_list cspm_nearby_map_main_background hover cspm_border_radius cspm_border_shadow pull-right" data-map-id="'+current_map_id+'" data-place-id="'+p+'">'+cspm_nearby_map.the_word_route+' <img src="'+cspm_nearby_map.img_file_url+'directions.png" /></div>',t+='<div class="clearfix"></div>',t+="</div>",t+="</div>",t+='<div class="clearfix"></div>',t+="</div>",jQuery("div.cspm_nearby_location_list_items_container_"+current_map_id).append(t).scrollTop(),t="")}nearby_map[current_map_id].gmap3({get:{name:"marker",tag:current_map_id,all:!0,callback:function(e){var s;jQuery("div#cspm_place_name_container_"+current_map_id).is(":visible")&&(s=jQuery("div#cspm_nearby_map_"+current_map_id).attr("data-selected-place-id"),jQuery.each(e,function(e,a){a.placeID!=s?a.setOpacity(.6):a.setOpacity(1)}))}},autofit:{}}),setTimeout(function(){jQuery("div#cspm_nearby_places_list_"+current_map_id+" span.cspm_nbr_places_found").html('<span class="wrapper"><span class="cssload-loader white"></span></span>'),setTimeout(function(){jQuery("div#cspm_nearby_places_list_"+current_map_id+" span.cspm_nbr_places_found").html("("+existing_places[current_map_id].length+")")},500)},500),s.hasNextPage?("undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+current_map_id,showSpinner:!0}),NProgress.start()),jQuery("div.cspm_nearby_location_list_items_container_"+current_map_id).on("scroll",function(){jQuery(this).scrollTop()+jQuery(this).innerHeight()>=jQuery(this)[0].scrollHeight&&setTimeout(function(){s.nextPage()},500)}),"undefined"!=typeof NProgress&&NProgress.done()):jQuery("div.cspm_nearby_location_list_items_container_"+current_map_id).off("scroll")}}else{var o=progress_map_vars.places_api_status_codes;cspm_api_status_info(current_map_id,o,a,"Places API")}}function cspm_add_place_marker(a,e,s,t,r){var _=s.geometry.location,i=s.name,n=s.place_id,c=t,p=origin[a],o="",d="",e=r?cspm_nearby_map.place_markers_file_url+e+".png":cspm_nearby_map.img_file_url+"destination.png";nearby_map[a].gmap3({marker:{latLng:_,title:i,tag:a,options:{icon:new google.maps.MarkerImage(e),opacity:1,placeID:n},callback:function(e){o+='<div class="travel_modes_container cspm_box_shadow">',o+='<div id="driving" class="nearby_map_mode_'+a+' active cspm_nearby_map_main_background cspm_border_top_radius" data-map-id="'+a+'" data-travel-mode="DRIVING" data-units="'+c+'" data-origin="'+p+'" data-destination="'+_+'" data-place-name="'+i+'" data-place-id="'+n+'"><i class="travel-mode icon-driving"></i></div>',o+='<div id="transit" class="nearby_map_mode_'+a+' cspm_nearby_map_main_background" data-travel-mode="TRANSIT" data-map-id="'+a+'" data-units="'+c+'" data-origin="'+p+'" data-destination="'+_+'" data-place-name="'+i+'" data-place-id="'+n+'"><i class="travel-mode icon-transit"></i></div>',o+='<div id="walking" class="nearby_map_mode_'+a+' cspm_nearby_map_main_background" data-travel-mode="WALKING" data-map-id="'+a+'" data-units="'+c+'" data-origin="'+p+'" data-destination="'+_+'" data-place-name="'+i+'" data-place-id="'+n+'"><i class="travel-mode icon-walking"></i></div>',o+='<div id="bicycle" class="nearby_map_mode_'+a+' cspm_nearby_map_main_background cspm_border_bottom_radius" data-map-id="'+a+'" data-travel-mode="BICYCLING" data-units="'+c+'" data-origin="'+p+'" data-destination="'+_+'" data-place-name="'+i+'"><i class="travel-mode icon-bicycle"></i></div>',o+="</div>",d+='<div id="directions" class="nearby_directions_btn_'+a+' cspm_nearby_map_main_background cspm_border_radius cspm_box_shadow" data-status="open" data-map-id="'+a+'"><i class="icon-directions"></i></div>',d+='<div id="'+n+'" class="clear-both"></div>',jQuery(document).on("click",".cspm_nearby_route_list[data-place-id="+n+"]",function(){jQuery(this).hasClass("disabled")||(cspm_get_place_route(a,p,_,"DRIVING",c,i,n),jQuery("div#travel_mode_container_"+a).html(o),jQuery("div#cspm_directions_btn_container_"+a).html(d),jQuery("div#cspm_nearby_places_list_"+a+" div.cspm_nearby_location_list_item").removeClass("active"),jQuery("div.cspm_nearby_location_list_item[data-place-id="+n+"]").addClass("active"),jQuery(".cspm_nearby_route_list[data-map-id="+a+"]").removeClass("disabled"),jQuery(this).addClass("disabled"))})},events:{click:function(e){jQuery("div.nearby_directions_btn_"+a).removeClass("active").attr("data-status","open"),jQuery("div.cspm_nearby_map_directions_"+a).hide(),jQuery("div#cspm_nearby_places_list_"+a).show(),cspm_get_place_route(a,p,_,"DRIVING",c,i,n),jQuery("div#travel_mode_container_"+a).html(o),jQuery("div#cspm_directions_btn_container_"+a).html(d),setTimeout(function(){jQuery("div#cspm_nearby_places_list_"+a+" div.cspm_nearby_location_list_item").removeClass("active"),jQuery("div.cspm_nearby_location_list_item[data-place-id="+n+"]").addClass("active");var e=jQuery("div.cspm_nearby_location_list_item[data-place-id="+n+"]");e.length&&jQuery("div.cspm_nearby_location_list_items_container_"+a).scrollTo(e,1e3)},500),jQuery(".cspm_nearby_route_list[data-map-id="+a+"]").removeClass("disabled"),jQuery(".cspm_nearby_route_list[data-map-id="+a+"][data-place-id="+n+"]").addClass("disabled")}}}})}function cspm_get_place_details(c,o,e){var d="",m=(selected_proximity_id[c],e);jQuery("div.cspm_nearby_map_place_details_content_"+c).html(""),new google.maps.places.PlacesService(nearby_map_object[c]).getDetails({placeId:o,fields:["name","photo","rating","user_ratings_total","place_id","formatted_address","plus_code","geometry","website","international_phone_number","url","type","review"]},function(e,a){if(a===google.maps.places.PlacesServiceStatus.OK){var s;if(d+='<div class="cspm_close_place_details" data-map-id="'+c+'">',d+='<img src="'+cspm_nearby_map.img_file_url+'close.png" />',d+="</div>",_=void 0!==e.photos?e.photos[0].getUrl({maxWidth:0,maxHeight:600}):cspm_nearby_map.img_file_url+"default-img.jpg",d+='<div class="cspm_place_details_header text-center" style="background:url('+_+') center center no-repeat;">',d+='<div class="cspm_place_details_header_overlay"></div>',void 0!==e.name&&(d+='<div class="cspm_place_title text-center">'+e.name+'<div class="cspm_place_type text-center">'+cspm_ucfirst(m)+"</div></div>"),void 0!==e.rating&&void 0!==e.user_ratings_total&&(d+='<div class="cspm_place_rating text-center"><img src="'+cspm_nearby_map.img_file_url+'one_star.png" class="cspm_one_star" />'+e.rating+" ("+e.user_ratings_total+" "+cspm_nearby_map.the_word_ratings+")</div>"),d+="</div>",d+='<div class="cspm_place_details_info_container">',d+='<div class="cspm_place_details_targets_container cspm_nearby_map_main_background text-center">',void 0!==e.reviews&&(d+='<a data-target="#cspm_place_reviews_container_'+c+'" class="cspm_place_details_target cspm_target_'+c+'" data-map-id="'+c+'"><img src="'+cspm_nearby_map.img_file_url+'reviews_target.png" />'+cspm_nearby_map.the_word_reviews+"</a>"),void 0!==e.photos&&(d+='<a data-target="#cspm_place_photos_container_'+c+'" class="cspm_place_details_target cspm_target_'+c+'" data-map-id="'+c+'"><img src="'+cspm_nearby_map.img_file_url+'photos_target.png" />'+cspm_nearby_map.the_word_photos+"</a>"),d+='<a class="cspm_place_details_target cspm_nearby_route_list" data-map-id="'+c+'" data-place-id="'+e.place_id+'"><img src="'+cspm_nearby_map.img_file_url+'route_target.png" />'+cspm_nearby_map.the_word_route+"</a>",d+='<div class="clearfix"></div>',d+="</div>",d+='<div class="cspm_place_details_content">',void 0!==e.formatted_address&&(d+='<div class="cspm_place_details_item"><img src="'+cspm_nearby_map.img_file_url+'address.png" />'+e.formatted_address+"</div>"),void 0!==e.plus_code&&void 0!==e.plus_code.compound_code&&(d+='<div class="cspm_place_details_item"><img src="'+cspm_nearby_map.img_file_url+'plus-code.png" />'+e.plus_code.compound_code+"</div>"),void 0!==e.geometry&&void 0!==e.geometry.location&&(cspm_distance_matrix(c,o,origin[c],e.geometry.location,current_distance_unit,"div.cspm_place_distance_"+o+" .cspm_place_distance_text"),d+='<div class="cspm_place_details_item cspm_place_distance_'+o+'"><img src="'+cspm_nearby_map.img_file_url+'distance.png" /><span class="cspm_place_distance_text"><span class="wrapper"><span class="cssload-loader"></span></span></span></div>'),void 0!==e.website&&(d+='<div class="cspm_place_details_item website"><img src="'+cspm_nearby_map.img_file_url+'website.png" /><a href="'+e.website+'" target="_blank" class="cspm_nearby_map_main_color hover">'+e.website+"</a></div>"),void 0!==e.international_phone_number&&(d+='<div class="cspm_place_details_item"><img src="'+cspm_nearby_map.img_file_url+'tel.png" />'+e.international_phone_number+"</div>"),void 0!==e.url&&(d+='<div class="cspm_place_details_item"><img src="'+cspm_nearby_map.img_file_url+'link.png" /><a href="'+e.url+'" target="_blank" class="cspm_nearby_map_main_color hover">'+cspm_nearby_map.google_map_link_text+"</a></div>"),void 0!==e.types&&0<e.types.length){for(d+='<div class="cspm_place_details_item"><img src="'+cspm_nearby_map.img_file_url+'tag.png" /> '+cspm_nearby_map.appears_also_text+" ",i=0;i<e.types.length;i++)void 0!==cspm_nearby_map[e.types[i]]&&(d+=cspm_nearby_map[e.types[i]],i<e.types.length-1&&(d+=", "));d+="</div>"}if(d+="</div>",void 0!==e.photos){d+='<div id="cspm_place_photos_container_'+c+'">',d+='<div class="cspm_place_photos_toggle cspm_nearby_map_main_background">',d+='<img src="'+cspm_nearby_map.img_file_url+'photos_target.png" />'+cspm_nearby_map.the_word_photos,d+="</div>",d+='<div class="cspm_place_photos_container">';var t=Math.round(e.photos.length/3);for(d+='<div id="place_img_container" class="cspm-col-lg-4 cspm-col-md-4 cspm-col-sm-4 cspm-col-xs-4 place_img_container">',p=0;p<e.photos.length;p++){var r=e.photos[p].getUrl({maxWidth:0,maxHeight:600}),_=e.photos[p].getUrl({maxWidth:0,maxHeight:1e3});d+='<a href="'+_+'"><img src="'+r+'" class="img-responsive" /></a>',p!=t&&p!=2*t||(d+="</div>",d+='<div class="cspm-col-lg-4 cspm-col-md-4 cspm-col-sm-4 cspm-col-xs-4 place_img_container">')}d+="</div>",d+='<div class="clearfix"></div>',d+="</div>",d+="</div>",setTimeout(function(){jQuery(".place_img_container a").simpleLightbox({fileExt:!1,captions:!1,disableScroll:!0,alertError:!0,spinner:!0});jQuery(document).on("click",".cspm_target_"+c,function(){var e=jQuery(this).attr("data-target");e.length&&jQuery(".cspm_nearby_map_place_details_container_"+c).scrollTo(e,1e3)})},500)}if(void 0!==e.reviews){for(d+='<div id="cspm_place_reviews_container_'+c+'" class="cspm_place_reviews_container">',d+='<div class="cspm_place_reviews_toggle cspm_nearby_map_main_background">',d+='<img src="'+cspm_nearby_map.img_file_url+'reviews_target.png" />'+cspm_nearby_map.the_word_reviews,d+="</div>",d+='<div class="cspm_place_reviews_content">',i=0;i<e.reviews.length;i++)d+='<div class="cspm_nearby_place_author_review">',d+='<div class="cspm_review_header">',void 0!==e.reviews[i].author_name&&(s=void 0!==e.reviews[i].author_url?e.reviews[i].author_url:"#",d+='<span class="cspm_review_author_name pull-left"><a href="'+s+'" target="_blank" class="author_name cspm_nearby_map_main_color hover">'+e.reviews[i].author_name+"</a></span>"),void 0!==e.reviews[i].time&&(s=cspm_time_converter(e.reviews[i].time),d+='<span class="cspm_review_date pull-left">'+s+"</span>"),void 0!==e.reviews[i].rating&&(stars_width=cspm_stars(e.reviews[i].rating),d+='<span class="cspm_review_rating pull-right cspm_stars_rating"><span style="width:'+stars_width+'px;"></span></span>'),d+='<div class="clearfix"></div>',d+="</div>",d+='<div class="cspm_review_text">',void 0!==e.reviews[i].text&&(d+=e.reviews[i].text),d+="</div>",d+="</div>";void 0!==e.url&&4<=e.reviews.length&&(d+='<div class="cspm_load_more_reviews text-center"><a href="'+e.url+'" target="_blank" class="cspm_nearby_map_main_color hover">'+cspm_nearby_map.more_reviews_text+"</a></div>"),d+="</div>",d+="</div>",setTimeout(function(){jQuery(".cspm_review_text").readmore({speed:500,collapsedHeight:100,moreLink:'<a href="#" class="text-right cspm_nearby_map_main_color hover" style="margin-top:10px">'+cspm_nearby_map.show_more_text+"</a>",lessLink:'<a href="#" class="text-right cspm_nearby_map_main_color hover" style="margin-top:10px">'+cspm_nearby_map.show_less_text+"</a>"})},500)}d+="</div>",jQuery("div.cspm_nearby_map_place_details_container_"+c).show(),jQuery("div.cspm_nearby_map_place_details_content_"+c).append(d),d=""}else{var n=progress_map_vars.places_api_status_codes;cspm_api_status_info(c,n,a,"Places API")}})}function cspm_get_place_route(i,e,a,s,t,n,c){var e=e,a=a,r=s,t=t,p="",o="",d="",m="";if(jQuery("div#travel_mode_container_"+i+", div#cspm_directions_btn_container_"+i).show(),"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+i,showSpinner:!0}),NProgress.start()),""==e||""==a){s=cspm_nearby_map.no_results_msg;return cspm_popup_msg(i,"warning","",s),console.warn('PROGRESS MAP, "Directions API": (NOT_FOUND) At least one of the locations specified in the request\'s origin, destination, or waypoints could not be geocoded.'),void("undefined"!=typeof NProgress&&NProgress.done())}nearby_map[i].gmap3({getroute:{options:{origin:e,destination:a,travelMode:google.maps.DirectionsTravelMode[r.toUpperCase()],unitSystem:google.maps.UnitSystem[t.toUpperCase()]},callback:function(e,a){if(void 0!==e&&"OK"===a){var s=e.routes[0],t=s.legs[0].distance.text,r=s.legs[0].duration.text;m+='<div class="cspm_place_name text-center">'+n+"</div><hr />",m+='<div class="text-center">',m+='<span class="cspm_place_distance"><i class="cspm_place_distance_icon"></i>'+t+"</span>",m+='<span class="cspm_place_travel_time"><i class="cspm_place_travel_time_icon"></i>'+r+"</span>",m+="</div>",jQuery("div#cspm_place_name_container_"+i).show().html(m),nearbyDirectionsDisplay[i].setDirections(e),"undefined"!=typeof NProgress&&NProgress.set(.5),p+='<div class="cspm_start_address cspm_nearby_map_main_background"><i class="cspm_nearby_start_icon"></i><span>'+s.legs[0].start_address+"</span></div>",d+='<div class="cspm_direction_steps cspm_box_shadow cspm_animated fadeIn">';for(var _=0;_<s.legs[0].steps.length;_++)d+='<div class="cspm_nearby_step">',""!=s.legs[0].steps[_].maneuver&&(d+='<div class="text-left pull-left cspm_maneuver_icon"><i class="maneuver_sprite '+s.legs[0].steps[_].maneuver+'"></i></div>'),d+='<div class="text-left pull-left cspm_route_distance cspm_nearby_map_main_color"><small>'+s.legs[0].steps[_].distance.text+", "+s.legs[0].steps[_].duration.text+"</small></div>",d+='<div class="clearfix"></div>',d+='<div class="text-left cspm_route_step">'+s.legs[0].steps[_].instructions+"</div>",d+="</div>";d+="</div>",o+='<div class="cspm_destination_address cspm_nearby_map_main_background"><i class="cspm_nearby_end_icon"></i><span>'+s.legs[0].end_address+"</span></div>",jQuery("div.nearby_directions_btn_"+i).show(),jQuery("div.cspm_nearby_map_directions_"+i+" div.cspm_start_address_container").html(p),jQuery("div.cspm_nearby_map_directions_"+i+" div.cspm_direction_steps_container").html(d),jQuery("div.cspm_nearby_map_directions_"+i+" div.cspm_destination_address_container").html(o),nearby_map[i].gmap3({get:{name:"marker",tag:i,all:!0,callback:function(e){jQuery.each(e,function(e,a){a.placeID!=c?a.setOpacity(.6):(a.setOpacity(1),jQuery("div#cspm_nearby_map_"+i).attr("data-selected-place-id",c))})}}})}else{m+='<div class="cspm_place_name text-center">'+n+"</div>",jQuery("div#cspm_place_name_container_"+i).show().html(m),jQuery("div.nearby_directions_btn_"+i).hide().removeClass("active").attr("data-status","open"),jQuery("div.cspm_nearby_map_directions_"+i).hide(),jQuery("div#cspm_nearby_places_list_"+i).show();e=progress_map_vars.directions_api_status_codes;cspm_api_status_info(i,e,a,"Directions API")}"undefined"!=typeof NProgress&&NProgress.done()}}})}function cspm_distance_matrix(t,e,a,s,r,_){setTimeout(function(){nearby_map[t].gmap3({getdistance:{options:{origins:[a],destinations:[s],travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem[r.toUpperCase()]},callback:function(e,a){var s="";void 0!==e&&"OK"===a?void 0!==e.rows[0].elements[0]&&a===e.rows[0].elements[0].status&&(s=(e=e.rows[0].elements[0]).distance.text+" "+cspm_nearby_map.the_word_away+" ("+e.duration.text+")",jQuery(_).html(s)):(s=progress_map_vars.distance_matrix_api_status_codes,cspm_api_status_info(t,s,a,"Distance Matrix API"))}}})},1e3)}function cspm_init_nearby_directions_display(e){null!=nearbyDirectionsDisplay[e]&&(nearbyDirectionsDisplay[e].setMap(null),nearbyDirectionsDisplay[e]=null),nearbyDirectionsDisplay[e]=new google.maps.DirectionsRenderer({suppressMarkers:!0,suppressInfoWindows:!0,draggable:!1,preserveViewport:!1,suppressBicyclingLayer:!0}),nearbyDirectionsDisplay[e].setMap(nearby_map_object[e])}function cspm_clear_nearby_markers(e){nearby_map[e].gmap3({clear:{tag:e}}),jQuery("div#cspm_nearby_map_"+e).attr("data-selected-place-id","false"),cspm_init_nearby_directions_display(e)}function cspm_clear_nearby_map_user_marker(e){nearby_map[e].gmap3({clear:{tag:"csnm_user_marker_"+e}})}function cspm_update_nearby_map_address_field(a,e,s=""){var t,r;"object"==typeof e&&void 0!==e.lat&&void 0!==e.lng&&(t=e.lat(),r=e.lng(),nearby_map[a].gmap3({getaddress:{latLng:e,callback:function(e){e=""==s?e&&e[1]?e&&e[1].formatted_address:t+","+r:s;jQuery("input#cspm_nearby_address_"+a).val(e).attr("data-latLng",t+","+r)}}}))}function cspm_reset_nearby_layout(e,a){jQuery("div#cspm_nearby_places_list_"+e).hide(),jQuery("div.cspm_nearby_map_place_details_container_"+e).hide(),jQuery("div.cspm_nearby_map_directions_"+e).hide(),jQuery("div#travel_mode_container_"+e).hide(),jQuery("div#cspm_directions_btn_container_"+e).hide(),jQuery("div#cspm_place_name_container_"+e).hide(),jQuery("div.cspm_nearby_location_list_items_container_"+e).html(""),jQuery("div#cspm_nearby_cats_container_"+e).show(),a&&(jQuery("div#cspm_nearby_address_locator_"+e).show(),jQuery("input[name=cspm_nearby_address_"+e+"]").attr("data-latlng","").select().trigger("focus"))}function cspm_autocomplete_place_changed_callback(_,a){"object"==typeof a&&a.addListener("place_changed",function(){var t,e,r=a.getPlace();r.geometry&&r.geometry.location?(t=jQuery("input#cspm_nearby_address_"+_).attr("data-latLng"),cspm_clear_nearby_map_user_marker(_),e=r.geometry.location,origin[_]=e,nearby_map[_].gmap3({marker:{latLng:e,tag:"csnm_user_marker_"+_,options:{icon:new google.maps.MarkerImage(cspm_nearby_map.geoloc_marker_url),draggable:!0},callback:function(e){var a,s;void 0!==e.position&&(origin[_]=e.position,a=e.position.lat(),s=e.position.lng(),t!=a+","+s&&cspm_update_nearby_map_address_field(_,e.position,r.formatted_address),setTimeout(function(){nearby_map_object[_].panTo(origin[_]),nearby_map_object[_].setCenter(origin[_])},500))},events:{dragend:function(){nearby_map[_].gmap3({get:{name:"marker",tag:"csnm_user_marker_"+_,callback:function(e){var a,s;void 0!==e.position&&(origin[_]=e.position,a=e.position.lat(),s=e.position.lng(),t!=a+","+s&&cspm_update_nearby_map_address_field(_,e.position),setTimeout(function(){nearby_map_object[_].panTo(origin[_]),nearby_map_object[_].setCenter(origin[_])},500))}}})}}},map:{options:{center:e}}})):(e='No details available for: "'+r.formatted_address+'"',cspm_popup_msg(_,"info","",e))})}function cspm_stars(e){return 16*Math.max(0,Math.min(5,parseFloat(e)))}function cspm_ucfirst(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)}function cspm_time_converter(e){var a=new Date(1e3*e),s=[cspm_nearby_map.jan,cspm_nearby_map.feb,cspm_nearby_map.mar,cspm_nearby_map.apr,cspm_nearby_map.may,cspm_nearby_map.jun,cspm_nearby_map.jul,cspm_nearby_map.aug,cspm_nearby_map.sep,cspm_nearby_map.oct,cspm_nearby_map.nov,cspm_nearby_map.dec],e=a.getFullYear(),s=s[a.getMonth()];return a.getDate()+" "+s+" "+e}function cspm_file_exists(e){var a=this.window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;if(!a)throw new Error("XMLHttpRequest not supported");return a.open("HEAD",e,!0),a.send(null),200==a.status}!function(m){m(document).on("click","div[class^=proximity_place_]",function(){var e=m(this).attr("data-map-id");"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+e,showSpinner:!0}),NProgress.start());var a=m("div#cspm_nearby_map_"+e).attr("data-selected-system-unit"),s=m("div#cspm_nearby_map_"+e).attr("data-radius"),t=m("div#cspm_nearby_map_"+e).attr("data-rankby"),r=m("div#cspm_nearby_map_"+e).attr("data-keyword");cspm_nearby_locations(e,m(this).attr("id"),a,s,t,r),m("div#cspm_nearby_map_"+e).attr("data-current-screen","places_list"),"undefined"!=typeof NProgress&&NProgress.done()}),m(document).on("click","img.cspm_back_to_nearby_cats",function(){var e=m(this).attr("data-map-id");"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+e,showSpinner:!0}),NProgress.start()),m("div#cspm_nearby_places_list_"+e).hide(),m("div#cspm_nearby_cats_container_"+e).show(),m("div#cspm_nearby_map_"+e).attr("data-current-screen","nearby_cats"),cspm_clear_nearby_markers(e),nearby_map_object[e].panTo(origin[e]),nearby_map_object[e].setCenter(origin[e]),m("div#travel_mode_container_"+e).hide(),m("div#cspm_directions_btn_container_"+e).hide(),m("div#cspm_place_name_container_"+e).hide(),m("div.cspm_nearby_location_list_items_container_"+e).html(""),"undefined"!=typeof NProgress&&NProgress.done()}),m(document).on("click","[class^=cspm_show_place_details_]",function(){var e=m(this).attr("data-map-id");"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+e,showSpinner:!0}),NProgress.start());var a=m(this).attr("data-place-id"),s=m(this).attr("data-place-name");m("div#cspm_nearby_places_list_"+e+" div.cspm_nearby_location_list_item").removeClass("active"),m("div#cspm_nearby_places_list_"+e+" div.cspm_nearby_location_list_item[data-place-id="+a+"]").addClass("active"),cspm_get_place_details(e,a,s),m("div#cspm_nearby_map_"+e).attr("data-current-screen","place_details"),m("div#cspm_nearby_places_list_"+e).hide(),"undefined"!=typeof NProgress&&NProgress.done()}),m(document).on("click","div.cspm_close_place_details",function(){var e=m(this).attr("data-map-id");"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+e,showSpinner:!0}),NProgress.start()),m("div.cspm_nearby_map_place_details_container_"+e).hide(),m("div#cspm_nearby_map_"+e).attr("data-current-screen","places_list"),m("div#cspm_nearby_places_list_"+e).show(),"undefined"!=typeof NProgress&&NProgress.done()}),m(document).on("click","div[class^=nearby_map_mode_]",function(){var e,a,s;m(this).hasClass("active")||(e=m(this).attr("data-map-id"),m("div.nearby_map_mode_"+e).removeClass("active"),m(this).addClass("active"),a=m(this).attr("data-origin").slice(1,-1).split(","),s=m(this).attr("data-destination").slice(1,-1).split(","),cspm_get_place_route(e,new google.maps.LatLng(a[0],a[1]),new google.maps.LatLng(s[0],s[1]),m(this).attr("data-travel-mode"),m(this).attr("data-units"),m(this).attr("data-place-name"),m(this).attr("data-place-id")))}),m(document).on("click","div[class^=nearby_directions_btn_]",function(){var e=m(this).attr("data-map-id");"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+e,showSpinner:!0}),NProgress.start()),"open"==m(this).attr("data-status")?(m(this).addClass("active").attr("data-status","hide"),m("div#cspm_nearby_map_"+e).attr("data-current-screen","place_directions"),m("div#cspm_nearby_places_list_"+e).hide(),m("div.cspm_nearby_map_place_details_container_"+e).hide()):(m("div#cspm_nearby_map_"+e).attr("data-current-screen","places_list"),m(this).removeClass("active").attr("data-status","open"),m("div#cspm_nearby_places_list_"+e).show()),m("div.cspm_nearby_map_directions_"+e).toggle(),"undefined"!=typeof NProgress&&NProgress.done()}),m(document).on("click",".cspm_get_geoloc",function(){var t=m(this).attr("data-map-id");"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+t,showSpinner:!0}),NProgress.start());var r=m("input#cspm_nearby_address_"+t).attr("data-latLng");nearby_map[t].gmap3({getgeoloc:{callback:function(e){var a,s;cspm_clear_nearby_map_user_marker(t),e?("undefined"!=typeof NProgress&&NProgress.set(.5),a=(origin[t]=e).lat(),s=e.lng(),r!=a+","+s&&cspm_update_nearby_map_address_field(t,e),nearby_map[t].gmap3({marker:{latLng:e,tag:"csnm_user_marker_"+t,options:{icon:new google.maps.MarkerImage(cspm_nearby_map.geoloc_marker_url),draggable:!0},events:{dragend:function(){nearby_map[t].gmap3({get:{name:"marker",tag:"csnm_user_marker_"+t,callback:function(e){var a,s;void 0!==e.position&&(origin[t]=e.position,a=e.position.lat(),s=e.position.lng(),r!=a+","+s&&cspm_update_nearby_map_address_field(t,e.position),setTimeout(function(){nearby_map_object[t].panTo(origin[t]),nearby_map_object[t].setCenter(origin[t])},500))}}})}}},map:{options:{center:e}}})):(s=progress_map_vars.geoErrorTitle,e=progress_map_vars.geoErrorMsg,cspm_popup_msg(t,"error",s,"<br />"+e),console.log("PROGRESS MAP: "+progress_map_vars.geoDeprecateMsg)),"undefined"!=typeof NProgress&&NProgress.done()}}})}),m(document).on("click",".cspm_get_address",function(){var _=m(this).attr("data-map-id");"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+_,showSpinner:!0}),NProgress.start());var i=m("input[name=cspm_nearby_keyword_"+_+"]").val();m("div#cspm_nearby_map_"+_).attr("data-keyword",i);var e=m("input[name=cspm_nearby_address_"+_+"]").val(),a=m("input[name=cspm_nearby_address_"+_+"]").attr("data-latlng"),n=m("div#cspm_nearby_map_"+_).attr("data-selected-system-unit"),c=m("div#cspm_nearby_map_"+_).attr("data-radius"),p=m("div#cspm_nearby_map_"+_).attr("data-rankby"),o=m("div#cspm_nearby_map_"+_).attr("data-single-proximity-id"),d=m("div#cspm_nearby_map_"+_).attr("data-count-place-types");e?("undefined"!=typeof NProgress&&NProgress.set(.5),""!==a?(m("#cspm_nearby_address_locator_"+_).hide(),m("div.cspm_btn_reset_nearby_map_"+_).show(),1==d?(cspm_nearby_locations(_,o,n,c,p,i),m("div#cspm_nearby_map_"+_).attr("data-current-screen","places_list")):m("div#cspm_nearby_map_"+_).attr("data-current-screen","nearby_cats")):(new google.maps.Geocoder).geocode({address:e},function(e,a){var s,t,r;a===google.maps.GeocoderStatus.OK?(s=e[0].geometry.location.lat(),t=e[0].geometry.location.lng(),origin[_]=e[0].geometry.location,setTimeout(function(){cspm_center_map_at_point(nearby_map[_],_,s,t,"zoom"),nearby_map[_].gmap3({marker:{latLng:e[0].geometry.location,tag:"csnm_user_marker_"+_,options:{icon:new google.maps.MarkerImage(cspm_nearby_map.geoloc_marker_url),draggable:!0},events:{dragend:function(){nearby_map[_].gmap3({get:{name:"marker",tag:"csnm_user_marker_"+_,callback:function(e){void 0!==e.position&&(origin[_]=e.position,cspm_reset_nearby_layout(_,!1),cspm_clear_nearby_markers(_),setTimeout(function(){nearby_map_object[_].panTo(origin[_]),nearby_map_object[_].setCenter(origin[_])},500),1==d?(cspm_nearby_locations(_,o,n,c,p,i),m("div#cspm_nearby_map_"+_).attr("data-current-screen","places_list")):m("div#cspm_nearby_map_"+_).attr("data-current-screen","nearby_cats"))}}})}}}}),m("#cspm_nearby_address_locator_"+_).hide(),m("div.cspm_btn_reset_nearby_map_"+_).show(),1==d?(cspm_nearby_locations(_,o,n,c,p,i),m("div#cspm_nearby_map_"+_).attr("data-current-screen","places_list")):m("div#cspm_nearby_map_"+_).attr("data-current-screen","nearby_cats")},500)):(r=progress_map_vars.geocoding_api_status_codes,cspm_api_status_info(_,r,a,"Geocoding API"))})):(e=cspm_nearby_map.no_address,cspm_popup_msg(_,"warning","",e),m("input[name=cspm_nearby_address_"+_+"]").trigger("focus")),"undefined"!=typeof NProgress&&NProgress.done()}),m(document).on("keypress","input[id^=cspm_nearby_keyword_]",function(e){var a=m(this).attr("data-map-id");13==e.keyCode&&(m(".cspm_get_address[data-map-id="+a+"]").trigger("click"),e.preventDefault())}),m(document).on("click","div[class^=cspm_btn_reset_nearby_map_]",function(){var e=m(this).attr("data-map-id");"undefined"!=typeof NProgress&&(NProgress.configure({parent:"div#codespacing_progress_map_"+e,showSpinner:!0}),NProgress.start()),m(this).hide(),"undefined"!=typeof NProgress&&NProgress.set(.5),cspm_reset_nearby_layout(e,!0),cspm_clear_nearby_markers(e),cspm_clear_nearby_map_user_marker(e),setTimeout(function(){nearby_map_object[e].panTo(origin[e]),nearby_map_object[e].setCenter(origin[e])},500),m("div#cspm_nearby_map_"+e).attr("data-current-screen","nearby_cats"),"undefined"!=typeof NProgress&&NProgress.done()})}(jQuery);